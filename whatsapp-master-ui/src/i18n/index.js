import React, { createContext, useContext, useMemo, useState, useEffect } from 'react';

const dictionaries = {
  zh: {
    'app.loading.title': '正在加载 WhatsApp Master UI...',
    'app.loading.subtitle': '请稍候，正在初始化系统',

    'header.title': 'WhatsApp 管理控制台',
    'header.refreshTitle': '刷新数据',
    'header.admin': '管理员',

    'sidebar.menu.dashboard': '仪表板',
    'sidebar.menu.workers': 'Worker管理',
    'sidebar.menu.whatsapp': 'WhatsApp控制',
    'sidebar.menu.messages': '消息管理',
    'sidebar.menu.settings': '系统设置',
    'sidebar.system.status': '系统状态',
    'sidebar.api.docs': 'API 文档',
    'sidebar.selectWorker': '选择Worker',

    'status.health.healthy': '正常',
    'status.health.degraded': '降级',
    'status.health.down': '停机',
    'status.health.unknown': '未知',

    'status.online': '在线',
    'status.running': '运行中',
    'status.offline': '离线',
    'status.error': '错误',
    'status.connecting': '连接中',

    'dashboard.title': '仪表板',
    'dashboard.subtitle': '系统概览和实时状态',
    'dashboard.refresh': '刷新数据',
    'dashboard.workerStatus': 'Worker状态',
    'dashboard.noWorkers': '暂无Worker实例',
    'dashboard.port': '端口',
    'dashboard.alert.connectionError': '连接错误',
    'dashboard.alert.connectMasterFailed': '无法连接到 Master 服务',
    'dashboard.pairing.pendingTitle': '待处理配对码',
    'dashboard.pairing.accountId': '账号 ID',
    'dashboard.pairing.enterOnPhone': '请在手机 WhatsApp 上输入此码',
    'dashboard.stats.totalWorkers': '总Worker数量',
    'dashboard.stats.onlineWorkers': '在线Worker',
    'dashboard.stats.todayMessages': '今日消息',
    'dashboard.stats.activeContacts': '活跃联系人',
    'dashboard.systemInfo.title': '系统信息',
    'dashboard.systemInfo.master': 'Master服务',
    'dashboard.systemInfo.running': '正常运行',
    'dashboard.systemInfo.failed': '连接失败',
    'dashboard.systemInfo.version': '系统版本',
    'dashboard.systemInfo.startTime': '启动时间',
    'dashboard.systemInfo.apiStatus': 'API状态',
    'dashboard.systemInfo.apiNormal': '正常',
    'dashboard.recentActivity.title': '最近活动',

    'common.refresh': '刷新',
    'common.start': '启动服务',
    'common.stop': '停止服务',
    'system.connectionFailed': '连接失败',

    'whatsapp.header.connectNew': '连接新账号',
    'whatsapp.header.createNew': '开始新连接',
    'whatsapp.header.createNewDesc': '输入手机号以创建新的Worker实例。系统将自动分配资源。',
    'whatsapp.header.createNewSubtitle': '创建一个新的WhatsApp Worker实例并登录',

    'whatsapp.tabs.login': '登录管理',
    'whatsapp.tabs.proxy': '代理设置',
    'whatsapp.tabs.messages': '消息管理',
    'whatsapp.tabs.groups': '群组管理',
    'whatsapp.tabs.contacts': '联系人',
    'whatsapp.tabs.debug': '调试工具',

    'whatsapp.login.phoneMethod': '手机号登录',
    'whatsapp.login.qrMethod': '二维码登录',
    'whatsapp.login.phoneLabel': '手机号',
    'whatsapp.login.phonePlaceholder': '请输入手机号 (例如: 8613800138000)',
    'whatsapp.login.phoneHint': '请确保手机号格式正确，包含国家代码（不带+号）',
    'whatsapp.login.cache': '尝试复用旧会话（缓存登录）',
    'whatsapp.login.enableProxy': '启用代理设置',
    'whatsapp.login.disableProxy': '禁用代理设置',
    'whatsapp.login.proxyTitle': 'SOCKS5 代理设置',
    'whatsapp.login.quickLabel': '快捷输入 (Host,Port,User,Pass)',
    'whatsapp.login.quickPlaceholder': '例如: 143.14.74.139,8886,user,pass',
    'whatsapp.login.ip': 'IP地址',
    'whatsapp.login.port': '端口',
    'whatsapp.login.user': '用户名',
    'whatsapp.login.pwd': '密码',
    'whatsapp.login.createAndConnect': '创建并连接',
    'whatsapp.login.enterQrBelow': '请使用WhatsApp扫描下方二维码',
    'whatsapp.login.enterPairingCode': '在WhatsApp输入以下配对码',
    'whatsapp.login.pairingCodeHint': '配对码有效期较短，请尽快输入',
    'whatsapp.login.successTitle': '已成功登录',
    'whatsapp.login.successDesc': 'WhatsApp 服务正在运行中，您可以开始使用了',
    'whatsapp.login.startMessaging': '开始发消息',
    'whatsapp.login.logout': '退出登录',
    'whatsapp.login.configTitle': '登录配置',
    'whatsapp.login.configDesc': '配置WhatsApp账号登录方式',
    'whatsapp.login.method': '登录方式',
    'whatsapp.login.identityLabel': '手机号 / 账号标识',
    'whatsapp.login.identityPlaceholder': '请输入手机号作为账号ID',
    'whatsapp.login.identityHint': '手机号将作为Worker的唯一标识',
    'whatsapp.login.useCache': '使用缓存登录',
    'whatsapp.login.enableProxyShort': '启用代理',
    'whatsapp.login.start': '开始登录',
    'whatsapp.login.exit': '退出',
    'whatsapp.login.closeWorkerTitle': '完全关闭Worker进程',
    'whatsapp.login.waitToStart': '等待启动登录...',
    'whatsapp.login.viewMessages': '查看消息',
    'whatsapp.login.viewContacts': '查看联系人',
    'whatsapp.login.qrHint': '请使用WhatsApp扫描二维码',
    'whatsapp.login.pairingHintPhone': '请在手机WhatsApp输入配对码',

    'whatsapp.proxy.title': '代理配置',
    'whatsapp.proxy.detect': '检测代理',
    'whatsapp.proxy.refresh': '刷新状态',
    'whatsapp.proxy.currentConfig': '当前代理配置',
    'whatsapp.proxy.enabled': '已启用',
    'whatsapp.proxy.disabled': '未启用',
    'whatsapp.proxy.localForward': '本地转发',
    'whatsapp.proxy.noConfig': '未检测到配置信息',
    'whatsapp.proxy.quickLabel': '快捷输入 (Host,Port,User,Pass)',
    'whatsapp.proxy.quickHint': '输入后会自动填充下方表单',
    'whatsapp.proxy.protocol': '协议 (Protocol)',
    'whatsapp.proxy.host': '主机地址 (Host)',
    'whatsapp.proxy.port': '端口 (Port)',
    'whatsapp.proxy.username': '用户名',
    'whatsapp.proxy.password': '密码',
    'whatsapp.proxy.switch': '切换代理',
    'whatsapp.proxy.ipLabel': 'IP:',
    'whatsapp.proxy.portLabel': 'Port:',
    'whatsapp.proxy.userLabel': 'User:',
    'whatsapp.proxy.pwdLabel': 'Pwd:',

    'whatsapp.groups.createTitle': '创建新群组',
    'whatsapp.groups.nameLabel': '群名称',
    'whatsapp.groups.namePlaceholder': '请输入群名称',
    'whatsapp.groups.membersLabel': '初始成员 (手机号)',
    'whatsapp.groups.membersPlaceholder': '输入成员手机号，用逗号分隔 (例如: 8613800000001, 8613800000002)',
    'whatsapp.groups.createBtn': '创建群组',
    'whatsapp.groups.addTitle': '添加群成员',
    'whatsapp.groups.groupIdLabel': '群组 ID (GroupID)',
    'whatsapp.groups.groupIdPlaceholder': '输入群组ID (例如: 123456789@g.us)',
    'whatsapp.groups.newMembersLabel': '新成员 (手机号)',
    'whatsapp.groups.newMembersPlaceholder': '输入成员手机号，用逗号分隔',
    'whatsapp.groups.addBtn': '添加成员',
    'whatsapp.groups.tipsTitle': '提示：',
    'whatsapp.groups.tip1': '创建群组时，请确保添加的成员手机号已在您的通讯录中或已注册WhatsApp。',
    'whatsapp.groups.tip2': '群组ID通常以 "@g.us" 结尾，您可以在消息列表或联系人列表中找到它。',
    'whatsapp.groups.tip3': '发送群消息请使用"消息管理"功能，直接输入群组ID作为目标号码。',

    'whatsapp.messages.sendTitle': '发送消息',
    'whatsapp.messages.contactLabel': '联系人/号码',
    'whatsapp.messages.contactPlaceholder': '输入号码或姓名',
    'whatsapp.messages.contentLabel': '内容',
    'whatsapp.messages.sendBtn': '发送',
    'whatsapp.messages.receivedTitle': '消息接收记录',
    'whatsapp.messages.refreshList': '刷新列表',
    'whatsapp.messages.unknownSender': '未知发送者',
    'whatsapp.messages.unknownTime': '未知时间',
    'whatsapp.messages.noContent': '无内容',
    'whatsapp.messages.empty': '暂无消息记录',

    'whatsapp.contacts.title': '联系人列表',
    'whatsapp.contacts.subtitle': '管理和查看WhatsApp联系人',
    'whatsapp.contacts.refresh': '刷新列表',
    'whatsapp.contacts.addTitle': '添加新联系人',
    'whatsapp.contacts.phoneLabel': '手机号 (带国家代码)',
    'whatsapp.contacts.phonePlaceholder': '例如: 8613800000000',
    'whatsapp.contacts.firstNameLabel': '名字 (可选)',
    'whatsapp.contacts.firstNamePlaceholder': '名字',
    'whatsapp.contacts.lastNameLabel': '姓氏 (可选)',
    'whatsapp.contacts.lastNamePlaceholder': '姓氏',
    'whatsapp.contacts.addBtn': '添加',
    'whatsapp.contacts.tip': '提示：输入完整手机号（不带+号）可直接添加到列表并开始对话。',
    'whatsapp.contacts.unknownUser': '未知用户',
    'whatsapp.contacts.unknownNumber': '未知号码',
    'whatsapp.contacts.loading': '正在加载联系人...',
    'whatsapp.contacts.empty': '暂无联系人数据',
    'whatsapp.contacts.sendTitle': '发送消息',
    'settings.subtitle': '配置系统与 WhatsApp 参数',
    'settings.saveConfig': '保存配置',
    'settings.systemStatus.title': '系统状态',
    'settings.systemStatus.ok': '正常',
    'settings.systemStatus.abnormal': '异常',
    'settings.systemStatus.master': 'Master服务',
    'settings.systemStatus.version': '系统版本',
    'settings.systemStatus.startTime': '启动时间',
    'settings.systemStatus.apiNormal': '正常',
    'settings.systemStatus.apiStatus': 'API状态',
    'settings.systemConfig.title': '系统配置',
    'settings.systemConfig.maxWorkers': '最大Worker数量',
    'settings.systemConfig.logLevel': '日志级别',
    'settings.systemConfig.cleanupInterval': '清理间隔 (秒)',
    'settings.systemConfig.autoRestart': '自动重启失败的Worker',
    'settings.whatsappConfig.title': 'WhatsApp配置',
    'settings.whatsappConfig.messageTimeout': '消息超时 (毫秒)',
    'settings.whatsappConfig.loginTimeout': '登录超时 (毫秒)',
    'settings.whatsappConfig.retryAttempts': '重试次数',
    'settings.whatsappConfig.autoLogoutInactive': '自动登出非活跃账号',
    'settings.apiConfig.title': 'API配置',
    'settings.apiConfig.rateLimit': '速率限制 (请求/分钟)',
    'settings.apiConfig.enableCors': '启用CORS',
    'settings.apiConfig.authRequired': '需要身份验证',
    'settings.danger.title': '危险操作',
    'settings.danger.resetAll': '重置所有配置',
    'settings.danger.resetAllDesc': '将所有配置恢复为默认值',
    'settings.danger.resetBtn': '重置配置',
    'settings.danger.clearAll': '清除所有数据',
    'settings.danger.clearAllDesc': '删除所有Worker和消息数据',
    'settings.danger.clearBtn': '清除数据',
    'workers.refreshStatus': '刷新状态',
    'workers.subtitle': '管理所有 WhatsApp Worker 实例',
    'workers.card.statusLabel': '状态',
    'workers.card.createdLabel': '创建时间',
    'workers.card.use': '使用',
    'workers.tooltip.restart': '重启更新Worker',
    'workers.tooltip.delete': '删除Worker',
    'workers.empty.desc': '连接您的第一个 WhatsApp 账号开始使用',
    'workers.confirm.delete': '确定要删除该 Worker 吗？',
    'workers.toast.deleted': 'Worker 已删除',
    'workers.toast.deleteFailed': '删除 Worker 失败',
    'workers.toast.restartTriggered': '已触发重启更新',
    'workers.toast.restartFailed': '重启更新失败',
    'workers.toast.restartRequestFailed': '重启更新请求失败',
    'messages.selectWorkerTitle': '请选择Worker',
    'messages.selectWorkerDesc': '请在侧边栏选择一个Worker来查看消息',
    'messages.pageTitle': '消息管理',
    'messages.currentWorker': '当前Worker',
    'messages.refreshMessages': '刷新消息',
    'messages.searchPlaceholder': '搜索消息内容或联系人...',
    'messages.filterAll': '全部消息',
    'messages.filterReceived': '接收的消息',
    'messages.filterSent': '发送的消息',
    'messages.statsTotal': '总消息数',
    'messages.statsReceived': '接收消息',
    'messages.statsSent': '发送消息',
    'messages.listTitle': '消息列表',
    'messages.noMatches': '没有找到匹配的消息',
    'messages.noMessages': '暂无消息',
    'messages.senderMe': '我',
    'messages.senderUnknown': '未知联系人',
    'messages.contentEmpty': '(无内容)',

    'whatsapp.status.loggedIn': '已登录',
    'whatsapp.status.running': '运行中',
    'whatsapp.status.stopped': '已停止',
    'whatsapp.status.waitingQr': '等待扫码',
    'whatsapp.status.waitingPhone': '等待验证',
    'whatsapp.status.creating': '启动中',
    'whatsapp.status.unknown': '未知',
    'whatsapp.status.sub.whatsappOnline': 'WhatsApp 在线',
    'whatsapp.status.sub.waitingLogin': '等待登录',
    'whatsapp.status.sub.serviceClosed': '服务已关闭',
    'whatsapp.status.sub.scanQr': '请扫描二维码',
    'whatsapp.status.sub.enterCode': '请输入验证码',
    'whatsapp.status.sub.initializing': '正在初始化...',
    'whatsapp.status.sub.checkConnection': '检查连接',

    'whatsapp.toast.enterPhone': '请输入手机号',
    'whatsapp.toast.contactAdded': '联系人添加成功',
    'whatsapp.toast.contactAddFailed': '添加联系人失败',
    'whatsapp.toast.contactAddRequestFailed': '添加联系人请求失败',
    'whatsapp.confirm.stopService': '确定要停止服务吗？停止后将无法接收消息。',
    'whatsapp.toast.serviceStopped': '服务已停止',
    'whatsapp.toast.serviceStartSent': '服务启动指令已发送',
    'whatsapp.toast.serviceStartFailed': '启动服务失败',
    'whatsapp.toast.serviceStartRequestFailed': '启动服务失败',
    'whatsapp.detail.restartUpdate': '重启更新',
    'whatsapp.toast.restartTriggered': '已触发重启更新',
    'whatsapp.toast.restartFailed': '重启更新失败',
    'whatsapp.toast.restartRequestFailed': '重启更新请求失败',
    'whatsapp.toast.groupNameMembersRequired': '请填写群名称和成员',
    'whatsapp.toast.atLeastOneMember': '请至少指定一个成员',
    'whatsapp.toast.groupCreated': '群组创建成功',
    'whatsapp.toast.groupCreateFailed': '创建群组失败',
    'whatsapp.toast.groupCreateRequestFailed': '创建群组请求失败',
    'whatsapp.toast.groupIdMembersRequired': '请填写群ID和成员',
    'whatsapp.toast.membersAdded': '成员添加成功',
    'whatsapp.toast.addMembersFailed': '添加成员失败',
    'whatsapp.toast.addMembersRequestFailed': '添加成员请求失败',
    'whatsapp.toast.proxySwitchSuccess': '代理切换成功',
    'whatsapp.toast.proxySwitchFailed': '代理切换失败',
    'whatsapp.toast.proxySwitchRequestFailed': '代理切换请求失败',
    'whatsapp.toast.proxyDetectSuccess': '代理检测成功',
    'whatsapp.toast.proxyDetectFailed': '代理检测失败',
    'whatsapp.toast.proxyDetectRequestFailed': '代理检测请求失败',
    'whatsapp.toast.elementDetectSuccess': '元素检测成功',
    'whatsapp.toast.elementDetectFailed': '元素检测失败',
    'whatsapp.toast.elementDetectRequestFailed': '元素检测请求失败',
    'whatsapp.toast.debugHtmlFailed': '获取调试HTML失败',
    'whatsapp.toast.loginFlowStarted': '登录流程已启动，Worker已创建/启动',
    'whatsapp.toast.loginFailed': '登录失败',
    'whatsapp.toast.loginRequestFailedPrefix': '登录请求失败:',
    'whatsapp.toast.loginSuccess': '登录成功！',
    'whatsapp.toast.logoutSuccess': '退出登录成功',
    'whatsapp.toast.logoutFailed': '退出登录失败',
    'whatsapp.confirm.closeWorker': '确定要关闭这个Worker实例吗？这将停止服务。',
    'whatsapp.toast.workerClosed': 'Worker已关闭',
    'whatsapp.toast.closeWorkerFailed': '关闭Worker失败',
    'whatsapp.toast.loadContactsFailed': '加载联系人失败',
    'whatsapp.toast.loadMessagesFailed': '加载消息失败',
    'whatsapp.toast.fillAllFields': '请填写完整信息',
    'whatsapp.toast.messageSendSuccess': '消息发送成功',
    'whatsapp.toast.messageSendFailed': '消息发送失败',
    'whatsapp.toast.selectContactPrefix': '已选择联系人:',
  },
  en: {
    'app.loading.title': 'Loading WhatsApp Master UI...',
    'app.loading.subtitle': 'Please wait while the system initializes',

    'header.title': 'WhatsApp Admin Console',
    'header.refreshTitle': 'Refresh Data',
    'header.admin': 'Admin',

    'sidebar.menu.dashboard': 'Dashboard',
    'sidebar.menu.workers': 'Workers',
    'sidebar.menu.whatsapp': 'WhatsApp Control',
    'sidebar.menu.messages': 'Messages',
    'sidebar.menu.settings': 'Settings',
    'sidebar.system.status': 'System Status',
    'sidebar.api.docs': 'API Docs',
    'sidebar.selectWorker': 'Select Worker',

    'status.health.healthy': 'Healthy',
    'status.health.degraded': 'Degraded',
    'status.health.down': 'Down',
    'status.health.unknown': 'Unknown',

    'status.online': 'Online',
    'status.running': 'Running',
    'status.offline': 'Offline',
    'status.error': 'Error',
    'status.connecting': 'Connecting',

    'dashboard.title': 'Dashboard',
    'dashboard.subtitle': 'System overview and live status',
    'dashboard.refresh': 'Refresh Data',
    'dashboard.workerStatus': 'Worker Status',
    'dashboard.noWorkers': 'No Worker instances',
    'dashboard.port': 'Port',
    'dashboard.alert.connectionError': 'Connection error',
    'dashboard.alert.connectMasterFailed': 'Cannot connect to Master service',
    'dashboard.pairing.pendingTitle': 'Pending Pairing Codes',
    'dashboard.pairing.accountId': 'Account ID',
    'dashboard.pairing.enterOnPhone': 'Enter this code in WhatsApp on your phone',
    'dashboard.stats.totalWorkers': 'Total Workers',
    'dashboard.stats.onlineWorkers': 'Online Workers',
    'dashboard.stats.todayMessages': 'Messages Today',
    'dashboard.stats.activeContacts': 'Active Contacts',
    'dashboard.systemInfo.title': 'System Info',
    'dashboard.systemInfo.master': 'Master Service',
    'dashboard.systemInfo.running': 'Running',
    'dashboard.systemInfo.failed': 'Connection failed',
    'dashboard.systemInfo.version': 'System Version',
    'dashboard.systemInfo.startTime': 'Start Time',
    'dashboard.systemInfo.apiStatus': 'API Status',
    'dashboard.systemInfo.apiNormal': 'Normal',
    'dashboard.recentActivity.title': 'Recent Activity',

    'common.refresh': 'Refresh',
    'common.start': 'Start Service',
    'common.stop': 'Stop Service',
    'system.connectionFailed': 'Connection failed',

    'whatsapp.header.connectNew': 'Connect New Account',
    'whatsapp.header.createNew': 'Start New Connection',
    'whatsapp.header.createNewDesc': 'Enter phone number to create a new Worker. Resources will be allocated automatically.',
    'whatsapp.header.createNewSubtitle': 'Create and log in a new WhatsApp Worker',

    'whatsapp.tabs.login': 'Login',
    'whatsapp.tabs.proxy': 'Proxy',
    'whatsapp.tabs.messages': 'Messages',
    'whatsapp.tabs.groups': 'Groups',
    'whatsapp.tabs.contacts': 'Contacts',
    'whatsapp.tabs.debug': 'Debug Tools',

    'whatsapp.login.phoneMethod': 'Phone Login',
    'whatsapp.login.qrMethod': 'QR Login',
    'whatsapp.login.phoneLabel': 'Phone',
    'whatsapp.login.phonePlaceholder': 'Enter phone (e.g., 8613800138000)',
    'whatsapp.login.phoneHint': 'Ensure correct format with country code (without +)',
    'whatsapp.login.cache': 'Reuse previous session (cached login)',
    'whatsapp.login.enableProxy': 'Enable proxy settings',
    'whatsapp.login.disableProxy': 'Disable proxy settings',
    'whatsapp.login.proxyTitle': 'SOCKS5 Proxy Settings',
    'whatsapp.login.quickLabel': 'Quick Input (Host,Port,User,Pass)',
    'whatsapp.login.quickPlaceholder': 'e.g., 143.14.74.139,8886,user,pass',
    'whatsapp.login.ip': 'IP Address',
    'whatsapp.login.port': 'Port',
    'whatsapp.login.user': 'Username',
    'whatsapp.login.pwd': 'Password',
    'whatsapp.login.createAndConnect': 'Create and Connect',
    'whatsapp.login.enterQrBelow': 'Scan the QR code below with WhatsApp',
    'whatsapp.login.enterPairingCode': 'Enter the following pairing code in WhatsApp',
    'whatsapp.login.pairingCodeHint': 'The pairing code expires soon. Enter promptly.',
    'whatsapp.login.successTitle': 'Logged in successfully',
    'whatsapp.login.successDesc': 'WhatsApp service is running. You can start using it.',
    'whatsapp.login.startMessaging': 'Start Messaging',
    'whatsapp.login.logout': 'Logout',
    'whatsapp.login.configTitle': 'Login Configuration',
    'whatsapp.login.configDesc': 'Configure WhatsApp account login method',
    'whatsapp.login.method': 'Login Method',
    'whatsapp.login.identityLabel': 'Phone / Account ID',
    'whatsapp.login.identityPlaceholder': 'Enter phone as account ID',
    'whatsapp.login.identityHint': 'Phone will be used as the Worker identifier',
    'whatsapp.login.useCache': 'Use cached login',
    'whatsapp.login.enableProxyShort': 'Enable Proxy',
    'whatsapp.login.start': 'Start Login',
    'whatsapp.login.exit': 'Exit',
    'whatsapp.login.closeWorkerTitle': 'Fully close Worker process',
    'whatsapp.login.waitToStart': 'Waiting to start login...',
    'whatsapp.login.viewMessages': 'View Messages',
    'whatsapp.login.viewContacts': 'View Contacts',
    'whatsapp.login.qrHint': 'Scan the QR code with WhatsApp',
    'whatsapp.login.pairingHintPhone': 'Enter the pairing code in WhatsApp',

    'whatsapp.proxy.title': 'Proxy Configuration',
    'whatsapp.proxy.detect': 'Detect Proxy',
    'whatsapp.proxy.refresh': 'Refresh Status',
    'whatsapp.proxy.currentConfig': 'Current Proxy Config',
    'whatsapp.proxy.enabled': 'Enabled',
    'whatsapp.proxy.disabled': 'Disabled',
    'whatsapp.proxy.localForward': 'Local Forwarder',
    'whatsapp.proxy.noConfig': 'No configuration detected',
    'whatsapp.proxy.quickLabel': 'Quick Input (Host,Port,User,Pass)',
    'whatsapp.proxy.quickHint': 'Automatically fills the form below',
    'whatsapp.proxy.protocol': 'Protocol',
    'whatsapp.proxy.host': 'Host',
    'whatsapp.proxy.port': 'Port',
    'whatsapp.proxy.username': 'Username',
    'whatsapp.proxy.password': 'Password',
    'whatsapp.proxy.switch': 'Switch Proxy',
    'whatsapp.proxy.ipLabel': 'IP:',
    'whatsapp.proxy.portLabel': 'Port:',
    'whatsapp.proxy.userLabel': 'User:',
    'whatsapp.proxy.pwdLabel': 'Pwd:',

    'whatsapp.groups.createTitle': 'Create New Group',
    'whatsapp.groups.nameLabel': 'Group Name',
    'whatsapp.groups.namePlaceholder': 'Enter group name',
    'whatsapp.groups.membersLabel': 'Initial Members (Phone)',
    'whatsapp.groups.membersPlaceholder': 'Enter phone numbers separated by commas (e.g., 8613800000001, 8613800000002)',
    'whatsapp.groups.createBtn': 'Create Group',
    'whatsapp.groups.addTitle': 'Add Group Members',
    'whatsapp.groups.groupIdLabel': 'Group ID (GroupID)',
    'whatsapp.groups.groupIdPlaceholder': 'Enter Group ID (e.g., 123456789@g.us)',
    'whatsapp.groups.newMembersLabel': 'New Members (Phone)',
    'whatsapp.groups.newMembersPlaceholder': 'Enter phone numbers separated by commas',
    'whatsapp.groups.addBtn': 'Add Members',
    'whatsapp.groups.tipsTitle': 'Tips:',
    'whatsapp.groups.tip1': 'Ensure members are in your contacts or registered on WhatsApp.',
    'whatsapp.groups.tip2': 'Group IDs usually end with "@g.us"; you can find them in lists.',
    'whatsapp.groups.tip3': 'Use "Messages" to send group messages with the Group ID as the target.',

    'whatsapp.messages.sendTitle': 'Send Message',
    'whatsapp.messages.contactLabel': 'Contact/Number',
    'whatsapp.messages.contactPlaceholder': 'Enter number or name',
    'whatsapp.messages.contentLabel': 'Content',
    'whatsapp.messages.sendBtn': 'Send',
    'whatsapp.messages.receivedTitle': 'Received Messages',
    'whatsapp.messages.refreshList': 'Refresh List',
    'whatsapp.messages.unknownSender': 'Unknown sender',
    'whatsapp.messages.unknownTime': 'Unknown time',
    'whatsapp.messages.noContent': 'No content',
    'whatsapp.messages.empty': 'No messages yet',

    'whatsapp.contacts.title': 'Contacts',
    'whatsapp.contacts.subtitle': 'Manage and view WhatsApp contacts',
    'whatsapp.contacts.refresh': 'Refresh List',
    'whatsapp.contacts.addTitle': 'Add Contact',
    'whatsapp.contacts.phoneLabel': 'Phone (with country code)',
    'whatsapp.contacts.phonePlaceholder': 'e.g., 8613800000000',
    'whatsapp.contacts.firstNameLabel': 'First Name (optional)',
    'whatsapp.contacts.firstNamePlaceholder': 'First Name',
    'whatsapp.contacts.lastNameLabel': 'Last Name (optional)',
    'whatsapp.contacts.lastNamePlaceholder': 'Last Name',
    'whatsapp.contacts.addBtn': 'Add',
    'whatsapp.contacts.tip': 'Tip: Enter full phone number (without "+") to add and start chat.',
    'whatsapp.contacts.unknownUser': 'Unknown User',
    'whatsapp.contacts.unknownNumber': 'Unknown Number',
    'whatsapp.contacts.loading': 'Loading contacts...',
    'whatsapp.contacts.empty': 'No contacts',
    'whatsapp.contacts.sendTitle': 'Send Message',
    'settings.subtitle': 'Configure system and WhatsApp settings',
    'settings.saveConfig': 'Save Config',
    'settings.systemStatus.title': 'System Status',
    'settings.systemStatus.ok': 'OK',
    'settings.systemStatus.abnormal': 'Abnormal',
    'settings.systemStatus.master': 'Master Service',
    'settings.systemStatus.version': 'System Version',
    'settings.systemStatus.startTime': 'Start Time',
    'settings.systemStatus.apiNormal': 'Normal',
    'settings.systemStatus.apiStatus': 'API Status',
    'settings.systemConfig.title': 'System Configuration',
    'settings.systemConfig.maxWorkers': 'Max Workers',
    'settings.systemConfig.logLevel': 'Log Level',
    'settings.systemConfig.cleanupInterval': 'Cleanup Interval (seconds)',
    'settings.systemConfig.autoRestart': 'Auto-restart failed Workers',
    'settings.whatsappConfig.title': 'WhatsApp Configuration',
    'settings.whatsappConfig.messageTimeout': 'Message Timeout (ms)',
    'settings.whatsappConfig.loginTimeout': 'Login Timeout (ms)',
    'settings.whatsappConfig.retryAttempts': 'Retry Attempts',
    'settings.whatsappConfig.autoLogoutInactive': 'Auto-logout inactive accounts',
    'settings.apiConfig.title': 'API Configuration',
    'settings.apiConfig.rateLimit': 'Rate Limit (req/min)',
    'settings.apiConfig.enableCors': 'Enable CORS',
    'settings.apiConfig.authRequired': 'Authentication Required',
    'settings.danger.title': 'Danger Zone',
    'settings.danger.resetAll': 'Reset All Configs',
    'settings.danger.resetAllDesc': 'Restore all configs to defaults',
    'settings.danger.resetBtn': 'Reset Configs',
    'settings.danger.clearAll': 'Clear All Data',
    'settings.danger.clearAllDesc': 'Delete all Workers and messages',
    'settings.danger.clearBtn': 'Clear Data',
    'workers.refreshStatus': 'Refresh Status',
    'workers.subtitle': 'Manage all WhatsApp Worker instances',
    'workers.card.statusLabel': 'Status',
    'workers.card.createdLabel': 'Created',
    'workers.card.use': 'Use',
    'workers.tooltip.restart': 'Restart Worker',
    'workers.tooltip.delete': 'Delete Worker',
    'workers.empty.desc': 'Connect your first WhatsApp account to get started',
    'workers.confirm.delete': 'Are you sure to delete this Worker?',
    'workers.toast.deleted': 'Worker deleted',
    'workers.toast.deleteFailed': 'Failed to delete Worker',
    'workers.toast.restartTriggered': 'Restart triggered',
    'workers.toast.restartFailed': 'Restart failed',
    'workers.toast.restartRequestFailed': 'Restart request failed',
    'messages.selectWorkerTitle': 'Select a Worker',
    'messages.selectWorkerDesc': 'Choose a Worker in the sidebar to view messages',
    'messages.pageTitle': 'Message Management',
    'messages.currentWorker': 'Current Worker',
    'messages.refreshMessages': 'Refresh Messages',
    'messages.searchPlaceholder': 'Search message content or contact...',
    'messages.filterAll': 'All',
    'messages.filterReceived': 'Received',
    'messages.filterSent': 'Sent',
    'messages.statsTotal': 'Total messages',
    'messages.statsReceived': 'Received messages',
    'messages.statsSent': 'Sent messages',
    'messages.listTitle': 'Message List',
    'messages.noMatches': 'No matching messages',
    'messages.noMessages': 'No messages',
    'messages.senderMe': 'Me',
    'messages.senderUnknown': 'Unknown contact',
    'messages.contentEmpty': '(Empty)',

    'whatsapp.status.loggedIn': 'Logged In',
    'whatsapp.status.running': 'Running',
    'whatsapp.status.stopped': 'Stopped',
    'whatsapp.status.waitingQr': 'Waiting for QR',
    'whatsapp.status.waitingPhone': 'Waiting for verification',
    'whatsapp.status.creating': 'Starting',
    'whatsapp.status.unknown': 'Unknown',
    'whatsapp.status.sub.whatsappOnline': 'WhatsApp Online',
    'whatsapp.status.sub.waitingLogin': 'Waiting for login',
    'whatsapp.status.sub.serviceClosed': 'Service closed',
    'whatsapp.status.sub.scanQr': 'Please scan the QR code',
    'whatsapp.status.sub.enterCode': 'Please enter the code',
    'whatsapp.status.sub.initializing': 'Initializing...',
    'whatsapp.status.sub.checkConnection': 'Check connection',

    'whatsapp.toast.enterPhone': 'Please enter phone number',
    'whatsapp.toast.contactAdded': 'Contact added successfully',
    'whatsapp.toast.contactAddFailed': 'Failed to add contact',
    'whatsapp.toast.contactAddRequestFailed': 'Add contact request failed',
    'whatsapp.confirm.stopService': 'Stop service? You will not receive messages.',
    'whatsapp.toast.serviceStopped': 'Service stopped',
    'whatsapp.toast.serviceStartSent': 'Service start command sent',
    'whatsapp.toast.serviceStartFailed': 'Failed to start service',
    'whatsapp.toast.serviceStartRequestFailed': 'Failed to start service',
    'whatsapp.detail.restartUpdate': 'Restart & Update',
    'whatsapp.toast.restartTriggered': 'Restart & update triggered',
    'whatsapp.toast.restartFailed': 'Restart & update failed',
    'whatsapp.toast.restartRequestFailed': 'Restart & update request failed',
    'whatsapp.toast.groupNameMembersRequired': 'Enter group name and members',
    'whatsapp.toast.atLeastOneMember': 'Specify at least one member',
    'whatsapp.toast.groupCreated': 'Group created',
    'whatsapp.toast.groupCreateFailed': 'Failed to create group',
    'whatsapp.toast.groupCreateRequestFailed': 'Create group request failed',
    'whatsapp.toast.groupIdMembersRequired': 'Enter group ID and members',
    'whatsapp.toast.membersAdded': 'Members added',
    'whatsapp.toast.addMembersFailed': 'Failed to add members',
    'whatsapp.toast.addMembersRequestFailed': 'Add members request failed',
    'whatsapp.toast.proxySwitchSuccess': 'Proxy switched',
    'whatsapp.toast.proxySwitchFailed': 'Failed to switch proxy',
    'whatsapp.toast.proxySwitchRequestFailed': 'Proxy switch request failed',
    'whatsapp.toast.proxyDetectSuccess': 'Proxy detection succeeded',
    'whatsapp.toast.proxyDetectFailed': 'Proxy detection failed',
    'whatsapp.toast.proxyDetectRequestFailed': 'Proxy detection request failed',
    'whatsapp.toast.elementDetectSuccess': 'Element detection succeeded',
    'whatsapp.toast.elementDetectFailed': 'Element detection failed',
    'whatsapp.toast.elementDetectRequestFailed': 'Element detection request failed',
    'whatsapp.toast.debugHtmlFailed': 'Failed to get debug HTML',
    'whatsapp.toast.loginFlowStarted': 'Login flow started, Worker created/started',
    'whatsapp.toast.loginFailed': 'Login failed',
    'whatsapp.toast.loginRequestFailedPrefix': 'Login request failed:',
    'whatsapp.toast.loginSuccess': 'Login successful!',
    'whatsapp.toast.logoutSuccess': 'Logged out successfully',
    'whatsapp.toast.logoutFailed': 'Logout failed',
    'whatsapp.confirm.closeWorker': 'Close this Worker instance? This will stop service.',
    'whatsapp.toast.workerClosed': 'Worker closed',
    'whatsapp.toast.closeWorkerFailed': 'Failed to close Worker',
    'whatsapp.toast.loadContactsFailed': 'Failed to load contacts',
    'whatsapp.toast.loadMessagesFailed': 'Failed to load messages',
    'whatsapp.toast.fillAllFields': 'Please fill all fields',
    'whatsapp.toast.messageSendSuccess': 'Message sent',
    'whatsapp.toast.messageSendFailed': 'Failed to send message',
    'whatsapp.toast.selectContactPrefix': 'Selected contact:',
  },
};

const I18nContext = createContext({
  lang: 'zh',
  setLang: () => {},
  t: (key) => key,
});

export function I18nProvider({ children }) {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'zh');

  useEffect(() => {
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';
  }, [lang]);

  const t = useMemo(() => {
    const dict = dictionaries[lang] || dictionaries.zh;
    return (key) => dict[key] || key;
  }, [lang]);

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);
  return React.createElement(I18nContext.Provider, { value }, children);
}

export function useI18n() {
  return useContext(I18nContext);
}
